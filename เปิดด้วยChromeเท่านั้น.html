<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>‡πÄ‡∏Å‡∏°‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤ ‚Äî ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --card-bg: #ffffff;
      --accent: #ff7a59;
      --accent2: #ffc857;
      --muted: #6b6b6b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Segoe UI", Roboto, "Noto Sans Thai", sans-serif;
      background: linear-gradient(135deg,#2b5876 0%, #4e4376 100%);
      color:#222;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .container{
      width:100%;
      max-width:760px;
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.98));
      border-radius:16px;
      padding:20px;
      box-shadow:0 10px 40px rgba(2,6,23,0.45);
      position:relative;
      overflow:hidden;
    }
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    header h1{font-size:20px;margin:0;color:#222}
    .meta-row{font-size:14px;color:var(--muted)}
    .card-body{display:grid;grid-template-columns: 1fr 320px;gap:18px}
    @media(max-width:800px){ .card-body{grid-template-columns:1fr;}}
    .left{
      padding:16px;
    }
    .question-box{
      background:linear-gradient(90deg,#fff 0,#fff0 100%);
      border-radius:12px;
      padding:18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
      min-height:120px;
      display:flex;flex-direction:column;justify-content:center;
    }
    .question-text{font-size:18px;margin:0 0 8px}
    .progress-wrap{margin-top:10px}
    .time-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .time-label{font-size:13px;color:var(--muted)}
    .progress{
      width:100%;
      height:10px;
      background:#eee;
      border-radius:999px;
      overflow:hidden;
      margin-top:8px;
    }
    .progress > i{
      display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));
      width:100%;
      transform-origin:left;
      transition:width 0.25s linear;
    }
    input[type="text"]{
      width:100%;
      padding:10px 12px;
      border-radius:8px;border:1px solid #ddd;font-size:16px;margin-top:12px;
    }
    .controls{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
    button{
      border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;
      background:var(--accent);color:#fff;
      box-shadow:0 6px 14px rgba(255,122,89,0.18);
    }
    button.secondary{background:transparent;color:var(--accent);border:1px solid rgba(0,0,0,0.06);box-shadow:none}
    .right{
      padding:16px;
      background:linear-gradient(180deg, #fbfbff, #fff);
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.04);
    }
    .stats{display:flex;flex-direction:column;gap:8px;}
    .stat{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-radius:8px;background:#fff;border:1px solid #f0f0f0}
    .feedback{height:38px;font-weight:700;display:flex;align-items:center;justify-content:center;border-radius:8px;margin-top:10px}
    .feedback.ok{background:linear-gradient(90deg,#d4f8e8,#c8f1df);color:green}
    .feedback.wrong{background:linear-gradient(90deg,#ffdfe0,#ffe7e9);color:#c03}
    .start-screen{position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(255,255,255,0.95));display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px;padding:20px}
    .hidden{display:none}
    .confetti{pointer-events:none;position:absolute;inset:0;overflow:hidden}
    .confetti span{position:absolute;font-size:20px;animation:fall 1400ms linear forwards}
    @keyframes fall{0%{transform:translateY(-10vh) rotate(0)}100%{transform:translateY(110vh) rotate(360deg)}}
    .small-note{font-size:13px;color:var(--muted);margin-top:6px}
    .footer-row{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .copy-btn{background:#4e6ef2}
  </style>
</head>
<body>
  <div class="container" id="app">
    <header>
      <h1>‡πÄ‡∏Å‡∏°‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤ ‚Äî ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</h1>
      <div class="meta-row">‡πÄ‡∏ß‡∏•‡∏≤/‡∏Ç‡πâ‡∏≠‡∏•‡∏∞ <strong id="timePerLabel">30</strong> ‡∏ß‡∏¥ ‚Ä¢ ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° <strong id="totalQ">0</strong></div>
    </header>

    <div class="card-body">
      <div class="left">
        <div class="question-box">
          <div class="question-text" id="question">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</div>

          <div class="progress-wrap">
            <div class="time-row">
              <div class="time-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <strong id="time">30</strong> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
              <div class="time-label">‡∏Ç‡πâ‡∏≠: <span id="qIndex">0</span>/<span id="qTotal">0</span></div>
            </div>
            <div class="progress" aria-hidden="true"><i id="prog" style="width:100%"></i></div>
          </div>

          <input id="answerInput" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Enter / ‡∏™‡πà‡∏á" autocomplete="off" />
          <div class="controls">
            <button id="submitBtn">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            <button id="skipBtn" class="secondary">‡∏Ç‡πâ‡∏≤‡∏°</button>
            <button id="pauseBtn" class="secondary">‡∏û‡∏±‡∏Å/‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</button>
          </div>

          <div id="feedback" class="feedback hidden"></div>
          <div class="small-note">‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á ‚Ä¢ ‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≤‡∏°‡∏à‡∏∞‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</div>
        </div>
      </div>

      <div class="right">
        <div class="stats">
          <div class="stat"><div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div><div id="score">0</div></div>
          <div class="stat"><div>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ)</div><div id="best">0</div></div>
          <div class="stat"><div>‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠</div><div id="timePerDisplay">30 ‡∏ß‡∏¥</div></div>
          <div class="stat"><div>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</div><div id="qCount">0</div></div>
        </div>

        <div style="margin-top:12px">
          <button id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
          <button id="restartBtn" class="secondary hidden">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
        </div>

        <div style="margin-top:12px">
          <div class="small-note">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå</div>
        </div>

      </div>
    </div>

    <div class="footer-row">
      <div class="small-note">‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏î‡∏¢ Gigil</div>
      <div>
        <button id="copyScore" class="copy-btn secondary" style="display:none">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•</button>
      </div>
    </div>

    <div class="start-screen" id="startScreen">
      <h2>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏∞‡∏¢‡∏≤‡∏á</h2>
      <p>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏Ñ‡∏≥‡∏ó‡∏≤‡∏¢ 10 ‡∏Ç‡πâ‡∏≠ üéÆ</p>
      <div style="display:flex;gap:8px">
        <button id="startNow">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢</button>
        <button id="settingsBtn" class="secondary">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤</button>
      </div>
    </div>

    <div class="confetti" id="confetti"></div>
  </div>

  <!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
  <audio id="beepSound"><source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg"></audio>
  <audio id="correctSound"><source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg"></audio>
  <audio id="wrongSound"><source src="https://actions.google.com/sounds/v1/cartoon/rumble_and_squeak.ogg" type="audio/ogg"></audio>

  <script>
    // ‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì) ‚Äî ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    const questions = [
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢‡∏ñ‡πà‡∏≤‡∏á‡∏Ç‡∏≤‡∏ï‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏õ‡∏≤‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß‡∏ô‡∏¥‡πâ‡∏ß‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡∏Å', a: '‡∏Å‡∏£‡∏£‡πÑ‡∏Å‡∏£'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡πá‡πÑ‡∏°‡πà‡πÉ‡∏Å‡∏•‡πâ ‡πÑ‡∏Å‡∏•‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏Å‡∏• ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏£‡πÜ?', a: '‡∏à‡∏°‡∏π‡∏Å'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏π‡πà ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÜ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏´‡πá‡∏ô‡∏Å‡∏±‡∏ô', a: '‡∏´‡∏π'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡∏ô‡∏≠‡∏ô‡∏°‡∏±‡∏ô‡∏¢‡∏∑‡∏ô ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡∏¢‡∏∑‡∏ô‡∏°‡∏±‡∏ô‡∏ô‡∏≠‡∏ô', a: '‡πÄ‡∏ó‡πâ‡∏≤'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏ö‡∏µ‡∏ö‡∏Å‡πâ‡∏ô‡∏≠‡∏≠‡∏Å‡∏õ‡∏≤‡∏Å', a: '‡∏¢‡∏≤‡∏™‡∏µ‡∏ü‡∏±‡∏ô'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡πÄ‡∏£‡∏≤‡∏Å‡∏•‡∏∑‡∏ô‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏°‡∏±‡∏ô‡∏Å‡∏•‡∏∑‡∏ô‡πÄ‡∏£‡∏≤‡∏ï‡∏≤‡∏¢', a: '‡∏ô‡πâ‡∏≥'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏ö‡∏¥‡∏î‡∏´‡∏±‡∏ß‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡πÑ‡∏´‡∏•‡∏Ñ‡∏ô‡∏ä‡∏≠‡∏ö‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á', a: '‡∏Å‡πä‡∏≠‡∏Å‡∏ô‡πâ‡∏≥'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡πÑ‡∏°‡πà‡πÉ‡∏´‡∏ç‡πà‡πÑ‡∏°‡πà‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏ö‡∏±‡∏á‡πÇ‡∏•‡∏Å‡∏°‡∏¥‡∏î‡∏ï‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ô', a: '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏∑‡∏°', a: '‡∏ï‡∏≤'},
      {q: '‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤: ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏≠‡πà‡∏¢ ‡∏î‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏≤‡∏ß ‡∏¢‡∏≤‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏±‡πâ‡∏ô', a: '‡∏Å‡∏•‡πâ‡∏ß‡∏¢'}
    ];

    // ELEMENTS
    const startScreen = document.getElementById('startScreen');
    const startNow = document.getElementById('startNow');
    const startBtn = document.getElementById('startBtn');
    const restartBtn = document.getElementById('restartBtn');
    const submitBtn = document.getElementById('submitBtn');
    const skipBtn = document.getElementById('skipBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const answerInput = document.getElementById('answerInput');
    const questionEl = document.getElementById('question');
    const scoreEl = document.getElementById('score');
    const qIndexEl = document.getElementById('qIndex');
    const qTotalEl = document.getElementById('qTotal');
    const qCount = document.getElementById('qCount');
    const timeEl = document.getElementById('time');
    const prog = document.getElementById('prog');
    const feedback = document.getElementById('feedback');
    const bestEl = document.getElementById('best');
    const timePerLabel = document.getElementById('timePerLabel');
    const timePerDisplay = document.getElementById('timePerDisplay');
    const copyScore = document.getElementById('copyScore');
    const confettiBox = document.getElementById('confetti');

    // sounds
    const beep = document.getElementById('beepSound');
    const correctS = document.getElementById('correctSound');
    const wrongS = document.getElementById('wrongSound');

    // state
    let score = 0;
    let current = 0;
    let timePerQuestion = 60;
    let remaining = timePerQuestion;
    let timer = null;
    let paused = false;
    let highScore = parseInt(localStorage.getItem('riddle_highscore') || '0',10);
    let consecutiveCorrect = 0;

    // init display
    qTotalEl.textContent = questions.length;
    qCount.textContent = questions.length;
    bestEl.textContent = highScore;
    timePerLabel.textContent = timePerQuestion;
    timePerDisplay.textContent = timePerQuestion + ' ‡∏ß‡∏¥';

    // helpers
    function showFeedback(type,text){
      feedback.classList.remove('hidden','ok','wrong');
      feedback.textContent = text;
      if(type==='ok'){feedback.classList.add('ok');}
      else if(type==='wrong'){feedback.classList.add('wrong');}
      setTimeout(()=>{feedback.classList.add('hidden')},1600);
    }

    function playConfetti(n=30){
      confettiBox.innerHTML = '';
      const emojis = ['üéâ','‚ú®','üçå','üü†','üü£','üí´'];
      for(let i=0;i<n;i++){
        const s = document.createElement('span');
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        s.style.left = (Math.random()*100) + '%';
        s.style.fontSize = (12+Math.random()*20)+'px';
        s.style.animationDuration = (1000+Math.random()*1400)+'ms';
        confettiBox.appendChild(s);
        setTimeout(()=>{ s.remove(); }, 2200);
      }
    }

    function updateProgress(){
      const pct = Math.max(0, (remaining / timePerQuestion) * 100);
      prog.style.width = pct + '%';
      timeEl.textContent = remaining;
      // change color when low time
      if(remaining <=5) prog.style.background = 'linear-gradient(90deg,#ff3b30,#ff7a59)';
      else prog.style.background = 'linear-gradient(90deg,var(--accent),var(--accent2))';
    }

    function startTimer(){
      clearInterval(timer);
      remaining = timePerQuestion;
      updateProgress();
      timer = setInterval(()=>{
        if(paused) return;
        remaining--;
        updateProgress();
        if(remaining === 5){
          // ringtone may be blocked until user interacts ‚Äî usually okay after click
          try{ beep.currentTime = 0; beep.play(); }catch(e){}
        }
        if(remaining <= 0){
          clearInterval(timer);
          showFeedback('wrong','‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤! ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: ' + questions[current].a);
          wrongS.currentTime = 0; try{ wrongS.play(); }catch(e){}
          consecutiveCorrect = 0;
          setTimeout(()=>{ current++; nextQuestion(); }, 1400);
        }
      },1000);
    }

    function nextQuestion(){
      if(current >= questions.length){
        endGame();
        return;
      }
      const item = questions[current];
      questionEl.textContent = item.q;
      qIndexEl.textContent = current+1;
      answerInput.value = '';
      answerInput.focus();
      startTimer();
    }

    function checkAnswer(){
      if(current >= questions.length) return;
      const user = answerInput.value.trim();
      const correct = questions[current].a.trim();
      if(user.length === 0){
        showFeedback('wrong','‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á');
        return;
      }
      clearInterval(timer);
      if(user.toLowerCase() === correct.toLowerCase()){
        score++;
        consecutiveCorrect++;
        scoreEl.textContent = score;
        showFeedback('ok','‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! +1');
        try{ correctS.currentTime = 0; correctS.play(); }catch(e){}
        if(consecutiveCorrect >= 3){ playConfetti(24); } // ‡∏™‡∏ô‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
      } else {
        consecutiveCorrect = 0;
        showFeedback('wrong','‡∏ú‡∏¥‡∏î! ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: ' + correct);
        try{ wrongS.currentTime = 0; wrongS.play(); }catch(e){}
      }
      setTimeout(()=>{ current++; nextQuestion(); }, 1000);
    }

    function skipQuestion(){
      clearInterval(timer);
      showFeedback('wrong','‡∏Ç‡πâ‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‚Äî ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: ' + questions[current].a);
      consecutiveCorrect = 0;
      setTimeout(()=>{ current++; nextQuestion(); }, 800);
    }

    function endGame(){
      clearInterval(timer);
      // show summary overlay (reuse start screen)
      startScreen.classList.remove('hidden');
      startScreen.querySelector('h2').textContent = '‡∏à‡∏ö‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß üéâ';
      startScreen.querySelector('p').textContent = '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ' + score;
      startNow.textContent = '‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
      restartBtn.classList.remove('hidden');
      copyScore.style.display = 'inline-block';
      // save high score
      if(score > highScore){
        highScore = score;
        localStorage.setItem('riddle_highscore', String(highScore));
        bestEl.textContent = highScore;
        playConfetti(40);
      }
    }

    // events
    submitBtn.addEventListener('click', checkAnswer);
    skipBtn.addEventListener('click', skipQuestion);
    pauseBtn.addEventListener('click', ()=>{
      paused = !paused;
      pauseBtn.textContent = paused ? '‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠' : '‡∏û‡∏±‡∏Å/‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠';
    });
    answerInput.addEventListener('keydown',(e)=>{
      if(e.key === 'Enter') checkAnswer();
    });

    startNow.addEventListener('click', ()=>{
      // start new game
      startScreen.classList.add('hidden');
      startNow.textContent = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢';
      score = 0; current = 0; scoreEl.textContent = 0; copyScore.style.display='none'; restartBtn.classList.add('hidden');
      nextQuestion();
    });

    startBtn.addEventListener('click', ()=>{
      startScreen.classList.add('hidden');
      score = 0; current = 0; scoreEl.textContent = 0; copyScore.style.display='none'; restartBtn.classList.add('hidden');
      nextQuestion();
    });

    restartBtn.addEventListener('click', ()=>{
      startScreen.classList.add('hidden');
      score = 0; current = 0; scoreEl.textContent = 0; copyScore.style.display='none';
      nextQuestion();
    });

    // copy score button
    copyScore.addEventListener('click', ()=>{
      const txt = `‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${score} ‡πÉ‡∏ô‡πÄ‡∏Å‡∏°‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤ (${questions.length} ‡∏Ç‡πâ‡∏≠)!`;
      navigator.clipboard?.writeText(txt).then(()=>{ alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß: ' + txt); }, ()=>{ alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏•‡∏≠‡∏á‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠'); });
    });

    // initial
    document.getElementById('qTotal').textContent = questions.length;
    document.getElementById('qIndex').textContent = 0;
    document.getElementById('qCount').textContent = questions.length;
    // show start overlay
    startScreen.classList.remove('hidden');

  </script>
</body>
</html>